<title>Create a MySQL DocDB Database</title>

<body bgcolor="#FFFFFF" text="#000000" topmargin="6" leftmargin="6" marginheight="6" marginwidth="6">

<center><h1>Create a MySQL DocDB Database</h1></center>
<p>
<ol>
<li> Start by creating a test database to make sure you can work with MySQL.
<li> Create the DocDB database and accounts: <br>
     <pre>
mysql -u root -p
mysql> show databases;
mysql> use mysql;
mysql> select * from user;
mysql> delete from user where user="";
mysql> create database SomeDocDB;
mysql> grant select on SomeDocDB.* to docdbro@localhost identified by "<em>read only password</em>";
mysql> grant select on SomeDocDB.* to docdbro@docsrv1.fnal.gov identified by "<em>read only password</em>";
mysql> grant select,insert,update on SomeDocDB.* to docdbrw@docsrv1.fnal.gov identified by "<em>read write password</em>";
mysql> grant select,insert,update on SomeDocDB.* to docdbrw@localhost identified by "<em>read write password</em>";
mysql> grant ALL on SomeDocDB.* to docdbadm@localhost identified by "<em>database owner password</em>";
mysql> grant ALL on SomeDocDB.* to docdbadm@docsrv1.fnal.gov identified by "<em>database owner password</em>";
mysql> quit
</pre>
<li>  Create the DocDB tables: <br>
      <b>mysql -u docdbadm -p SomeDocDB < CreateDatabase.SQL</b> <br>
      (CreateDatabase.SQL is in DocDB/sql)
<li> You will want to populate  
     the Author, Institution, MajorTopic, MinorTopic, and SecurityGroup tables. <br>
     <pre>
mysql -u docdbadm -p SomeDocDB
mysql> insert into SecurityGroup set Name='docdbadm',Description='DocDB Administrators',CanCreate=1;
mysql> insert into SecurityGroup set Name='SomeGroup',Description='Some Group of Priviledged People',CanCreate=1;
mysql> insert into Institution set ShortName='Fermilab',LongName='Fermi National Accelerator Laboratory';
mysql> insert into Author (FirstName,MiddleInitials,LastName,InstitutionID) 
    ->   values('John','J.','Doe',1),
    -> ('W.','Bill','Jones',1);
mysql> insert into Author (FirstName,LastName,InstitutionID) 
    ->   values('Amy','Smith',1);
mysql> INSERT INTO MajorTopic set ShortDescription='Main Topic 1',
    -> LongDescription='Some major topic';
mysql> INSERT INTO MajorTopic (ShortDescription,LongDescription)         
    -> values('Main Topic 2','Another major topic');
mysql> insert into MinorTopic (MajorTopicID,ShortDescription,LongDescription)
  values(1,'Other','Miscelaneous'), 
  (1,'Minor Topic','some minor topic description'); 
     </pre>
<li>  <font color="red">Institutions, Major Topics, and Security Groups 
      can only be added by direct access to mysql.</font>
<li>  Minor Topics and Authors can be added via the web interface, 
      but it is easier to use the database directly if you have a lot of them to enter.
      
<li>  All other tables will be populated from the web interface when
      a document is entered into the database.
</ol>

<!-- begin footer -->
<hr>
<i><font size="-1">
<script language="javascript">
<!-- Hide from browsers that do not understand Javascript
// print the URL and modification date of this page
var url = document.location;
document.write(url)  
var dt = document.lastModified;
document.write('<br> Last Modified:')  
document.write(dt)  
// end hiding --> 
</script> 
<br>
<A HREF="mailto:btev-docdb@fnal.gov">Document Database Administrators</A> 
</font></i>
</body>
</html>
