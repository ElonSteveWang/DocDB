#! /usr/bin/env perl
#
# Author:  Adam Bryant
#

use CGI;

require "DocDBGlobals.pm";
require "HTMLUtilities.pm";
require "SecuritySQL.pm";
require "Scripts.pm";
require "ResponseElements.pm";
require "Cookies.pm";

# Start page

$query = new CGI;
%params = $query -> Vars; 

#Note: Remove cookie0, see if you can do this with an array and pushes

# I.e. push @cookies,$query->cookie....
@cookies = ();

push @cookies, $query->cookie(-name=>'userid', 
			  -value=>"$params{requester}", 
			  -expires=>'+10y',
			  -path=>'/');
push @cookies, $query->cookie(-name=>'archive', 
			  -value=>"$params{archive}",
 			  -expires=>'+10y',
			  -path=>'/');
push @cookies, $query->cookie(-name=>'numfile', 
			  -value=>"$params{numfile}",
 			  -expires=>'+10y',
			  -path=>'/');
push @cookies, $query->cookie(-name=>'upload', 
			  -value=>"$params{upload}", 
			  -expires=>'+10y',
			  -path=>'/');
push @cookies, $query->cookie(-name=>'topicmode', 
			  -value=>"$params{topicmode}", 
			  -expires=>'+10y',
			  -path=>'/');
push @cookies, $query->cookie(-name=>'authormode', 
			  -value=>"$params{authormode}", 
			  -expires=>'+10y',
			  -path=>'/');
push @cookies, $query->cookie(-name=>'overdate', 
			  -value=>"$params{overdate}", 
			  -expires=>'+10y',
			  -path=>'/');
                          
print $query->header(-cookie=>\@cookies);
print "<meta http-equiv=\"Refresh\" content=\"10; URL=$MainPage\">"; ### generates improper html but works for now

&BTeVHeader("Setting Preferences");

print "<p>";
print "Your preferences have been set. You will be redirected to the document database <a href=\"$MainPage\">home page</a> in 10 seconds.";
print "<p>";

&DocDBNavBar;
&BTeVFooter($DBWebMasterEmail,$DBWebMasterName);
